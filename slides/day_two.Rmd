---
title: "R Markdown Workshop - Day 2"
author: "Anne-Kathrin Kleine"
date: "2022/05/05 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    css: ["default", "css/sfah.css", "css/fonts.css"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
    seal: false 
    includes:
      in_header: header.html

---
name: Rmarkdown Intro
class: left, middle
background-image: url(img/yoal-desurmont-jqgsM3B9Fpo-unsplash.jpg)
background-size: cover

<h1><span style="color:white"> .fat[.fancy[R Markdown Workshop - Day 2]]</span>
<br /> 
<br /> 

<h2><span style="color:white"> .fancy[Creation, organisation, storage, and collaboration]</span>

<h3><span style="color:white"> Anne-Kathrin Kleine | University of Groningen </span>


<!-- this ends up being the title slide since seal = FALSE-->


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(knitr)
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
# options(knitr.table.format = "html")
library(tidyverse)
library(babynames)
library(fontawesome) # from github: https://github.com/rstudio/fontawesome
library(DiagrammeR)
library(rmarkdown)
library(haven)

hook_source <- knitr::knit_hooks$get('source')
knitr::knit_hooks$set(source = function(x, options) {
  x <- stringr::str_replace(x, "^[[:blank:]]?([^*].+?)[[:blank:]]*#<<[[:blank:]]*$", "*\\1")
  hook_source(x, options)
})
```


<style type="text/css">

.hljs-github .hljs {
    background: #D3D3D3;
}

.inline-c, remark-inline-code {
   background: #228B22;
   border-radius: 3px;
   padding: 4px;
   font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;
}


.blue-h{
   background: #1261A0;
}


.out-t, remark-inline-code {
   background: #1261A0;
   border-radius: 3px;
   padding: 4px;
   
}

.pull-left-c {
    float: left;
    width: 58%;
    
}

.pull-right-c {
    float: right;
    width: 38%;
    
}

.left2 {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 20%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
    
}

--

.right2 {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 80%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
    
}

--

.center2 {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}


.medium {
    font-size: 75%
}

.small {
    font-size: 50%
    }

.action {
    background-color: #f2eecb;
  
}


</style>
    

<!-- this adds the link footer to all slides, depends on my-footer class in css-->


---
class: middle, inverse

# .fat[.fancy[Version control]]

---
class: middle, inverse

## .fancy[Version control]

.pull-left[
- Research papers have many versions before publication
- two main challenges emerge:
  - keeping track of changes and versions
  - reverting a previous version if necessary 
- different approaches for version control:
  - edit, rename and save files
  - use applications (Dropbox, Google Docs, Overleaf)
  - use version control systems such as Git and GitHub 
]

.pull-right[
```{r eval=FALSE}
manuscript
   |
   |- journals_FINAL_19May.Rmd
   |- journals_PAPERVERS_17May.Rmd
   |- journals_10May.Rmd
   |- journals_FINAL.Rmd
   |- journals_26APRIL_newliterature.Rmd
   
   ...
   
   |- journals.Rproj
   |- references.bib  
   |- apa_7th.csl
   
```
]
---
class: middle, inverse

# .fat[.fancy[Version control with Git and GitHub]]

---

class: middle, inverse

## .fancy[Advantages of using Git and GitHub]

.pull-left[


#### ğŸˆ Contribute to open source projects, see [here](https://www.dataschool.io/how-to-contribute-on-github/)
- almost all open source projects use GitHub

#### ğŸ¤ Showcase your work


#### ğŸ” Track changes across versions 
]

.pull-right[
#### ğŸ‘¨â€ğŸ”¬ ğŸ‘·â€â™€ï¸ Collaborate on projects 


#### ğŸ¤¹â€â™‚ï¸ Various integration options
- GitHub can integrate with many common platforms such as Amazon and Google Cloud; or use GitHub pages or Netlify to build websites based on your R (Markdown) files 
]
---
class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; Definitions]

### Git <img src="img/git.png" width="50px" >

- a software that keeps track of versions of a set of files
- it is *local* to you; the records are kept on your computer

--

### GitHub <img src="img/github.png" width="70px" >

- a hosting service, or a website, that can keep the records
- it is *remote* to you, like the Dropbox website
- but unlike Dropbox, GitHub is specifically structured to keep records with Git



---
class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; Definitions]

### Repository, or repo
- a set of files whose records are kept together, by Git and/or on GitHub
- it is like a folder, which can keep files and other folders containing files

--

### To commit
- to take a snapshot of, or to version, a repository
- it is like saving a new version of all files and sub-folders in your project folder with a new name
- it is local, the records are kept on your computer unless you push

--

### To push
- to move a copy of the records from Git to GitHub, from your computer to online server
- it is like uploading (the new versions of) your files and sub-folders to a website

---

class: center, inverse

## .fancy[Version Control &mdash; Git and GitHub]

<img src="img/repository.png" width="500px" >

---

class: middle, inverse

## .fat[.fancy[How familiar are you with using the command line (terminal, power shell...)?]] 

### Go to [www.menti.com](www.menti.com) ğŸ¤¸ and enter the code **6059 2895** 

### [See results](https://www.mentimeter.com/app/presentation/8377d55da27523147614cd11aba6f796/82eb3869f165)

---


class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; check setup]

#### In the ğŸ“± terminal ğŸ“±: ` git --version ` 
- you should see the Git version  âœ…

#### In the ğŸ“± terminal ğŸ“±: ` git config --global user.name ` 
- you should see the Git user name  âœ…

<br /> 

#### ğŸš«  If these steps did not work, go back [here](https://docs.github.com/en/get-started/getting-started-with-git/setting-your-username-in-git) and continue setting up Git where you left off

---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; connect local with remote]

.pull-left[
#### 1. Go to GitHub and create a new repository 

<img src="img/new_repo.png" width="200px"/>

]

.pull-right[

#### 2. Fill in some info, create a public repository (don't bother with Readme etc - those will be added later!)
<img src="img/testrepo.png" width="250px"/>


]
---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; connect local with remote]

.pull-left[
#### 3. Follow the steps in Option 1: .blue-h["â€¦create a new repository on the command line"] 

<img src="img/push.png" width="400px"/>

]

.pull-right[

#### 4. In the ğŸ“± terminal ğŸ“±, navigate to your R project folder 
<img src="img/navigate.png" width="200px"/>
]

---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; connect local with remote]

.pull-left[
#### 5. In the ğŸ“± terminal ğŸ“±, type:

.blue-h[`git init`] this initializes a git repo on your local machine

.blue-h[`git add .`] this stages all the content in that folder to be committed

.blue-h[`git commit -m "fist commit"`] stages all content to be pushed in next step

.blue-h[`git remote add origin https://github.com/AnneOkk/testrepo.git`] substitute with your repo URL 

]

.pull-right[

.blue-h[`git push origin master`] push all the content from Git to GitHub

<img src="img/success.png" width="300px"/>


]

--

### ğŸˆ .fancy[Pushed files should appear in GitHub repository] ğŸˆ


---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; .gitignore]

.pull-left[

- .blue-h[`.gitignore`] file specifies which file(s) and/or folder(s) should be excluded from version control

- lists one item per line; each line has a pattern, which determines whether files should be ignored 

- see [gitignore documentation](https://git-scm.com/docs/gitignore) for more info on the different patterns 

- reasons to exclude files from being pushed include:
  - personal information others should not see (e.g., credential files)
  - no rights to share (e.g., certain data files)
  - outputs that may be re-created (e.g., `outputs.pdf`)
]

.pull-right[

<img src="img/gitignore.png" width="500px"/>

]

---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; collaborating]


### Imagine... ğŸ¤”

--

#### ...you work in a team of data scientists/ data enthusiastic researchers ğŸ§™ğŸ§™ğŸ¿ğŸ§™â€â™€ï¸ğŸ§™ğŸ»â€â™€ï¸

--

#### ...you want to be able to work together on a data analysis project ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’» ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»

--

#### ...you want to keep track of what the others do and finally merge individual contributions into one overall project  âœ¨ ğŸ’¾ âœ¨

--

### But how â“ ğŸ¤· 
---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; collaborating]

## .fancy[Scenario 1 - you are owner/ collaborator]


### ... first things first!

--

.pull-left[

#### Go to the GitHub repository you are working on as a team 

#### In the ğŸ“± terminal ğŸ“±, navigate to where you want to store the project files and type:


##### .blue-h[`git clone https://github.com/AnneOkk/testrepo.git`] 


]

.pull-right[

<img src="img/clone.png" width="300px"/>
]



---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; collaborating]

#### Next, you would always want to make sure that you are up to date with what has changed in the remote repository

--

.pull-left[

#### In the ğŸ“± terminal ğŸ“±, type:

.blue-h[`git pull origin master`] 

Create a new branch to add changes that belong to a novel feature you are working on (this prevents messing up the master branch)

.blue-h[`git checkout -b "cool-feature"`]

Now make some changes (e.g., add the new cool feature)

]

.pull-right[

...and then the usual workflow (`git add .`, `git commit -m "new feature file added"`) ğŸ˜´


 ğŸš§ ğŸ‘€ BUT you push the changes to the newly created branch to prevent messing up the master branch! ğŸ‘€ ğŸš§

.blue-h[`git push origin cool-feature`]


]


---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; collaborating]


<img src="img/pull.png" width="400px"/>

On GitHub, you would now create a pull request

Reviewers (other team members) may be assigned to check the changes and start a conversation (through comments)

--

### ğŸ‰ Once all issues are resolved, your changes will be merged into the master branch ğŸ¥³ 


---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; collaborating]

... But what if some issues remain unresolved? ğŸ¤” "Meh, you forgot to read in the data!"

--

.pull-left[
You may just add small things through:

`git add .`

`git commit -m "added data reader"`

`git push origin branch-name`

â— BUT if some time has passed or the addition is majorâ—

Checkout to the master branch:

.blue-h[`git checkout master`]
]

.pull-right[

Pull all changes that happened in the mean time:

.blue-h[`git pull origin master`]

Checkout a new branch for the missing feature;

.blue-h[`git checkout -b data-reader`]

Make the necessary changes!

... And then, the usual workflow (don't forget to push to new branch!)
]


---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; collaborating]

## .fancy[Scenario 2 - you want to contribute to an open science project]


--

.pull-left[

#### In GitHub, navigate to the [project](https://github.com/AnneAlterEgo/Testrepo/tree/main) you want to contribute to 

Fork the repo!

<img src="img/fork.png" width="250px"/>

 Clone the new repo! 

 .blue-h[`git clone https://github.com/AnneOkk/Testrepo-1.git`] 

Make your changes and push to your master branch 

]

.pull-right[

Clone the new repo! 

 .blue-h[`git clone https://github.com/AnneOkk/Testrepo-1.git`] 

Make your changes and push to your master branch 


]



---

class: middle, inverse

## .fancy[Version Control &mdash; Git and GitHub &mdash; collaborating]

.pull-left[
Go back to the original repository and create a pull request. 

You may need to click "compare across forks"

<img src="img/successful_pull.png" width="500px"/>
]

.pull-right[
... On the other side 


<img src="img/review_pull.png" width="300px"/>

 If you're happy with the changes, merge! Otherwise, request additional changes in a comment. 

]

--

###ğŸŠ Yey, you're all set to contribute to open science projects on GitHub! ğŸŠ

---

class: middle, inverse

# .salt[.fancy[Your turn! ğŸ¤¹]]

1.  Connect your local R project folder with a GitHub repository

2. Change some of the content in R, save, and then push the changes to GitHub
  - .blue-h[`git add .`]
  - .blue-h[`git commit -m "senseful commit message that describes the change(s)"`]
  - .blue-h[`git push origin master`]

    <br /> 

3. [OPTIONAL] Create a pull request for your own repository and merge the changes into the master branch 




